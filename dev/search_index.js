var documenterSearchIndex = {"docs":
[{"location":"function_index/#Index","page":"Index","title":"Index","text":"","category":"section"},{"location":"function_index/","page":"Index","title":"Index","text":"","category":"page"},{"location":"function_index/","page":"Index","title":"Index","text":"Modules = [DiffFusionServer]","category":"page"},{"location":"function_index/#DiffFusionServer._INFO_STRING","page":"Index","title":"DiffFusionServer._INFO_STRING","text":"const _INFO_STRING\n\nAn info string with API details.\n\n\n\n\n\n","category":"constant"},{"location":"function_index/#DiffFusionServer._NO_HTTP_ERROR","page":"Index","title":"DiffFusionServer._NO_HTTP_ERROR","text":"const _NO_HTTP_ERROR\n\nDefault return status code.\n\n\n\n\n\n","category":"constant"},{"location":"function_index/#DiffFusionServer._check_for_alias_in_repository-Tuple{AbstractString, AbstractDict}","page":"Index","title":"DiffFusionServer._check_for_alias_in_repository","text":"_check_for_alias_in_repository(alias::AbstractString, d::AbstractDict)\n\nReturn valid alias from repository or a response that returns error message.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer._check_for_header_field-Tuple{HTTP.Messages.Request, AbstractString}","page":"Index","title":"DiffFusionServer._check_for_header_field","text":"_check_for_header_field(req::HTTP.Request, key::AbstractString)\n\nReturn valid alias from rquest header or a response that returns error message.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer._error_alias_not_found-Tuple{AbstractString}","page":"Index","title":"DiffFusionServer._error_alias_not_found","text":"_error_alias_not_found(alias::AbstractString)\n\nCreate error response for missing alias.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer._error_build_object_fail-Tuple{AbstractString, Exception}","page":"Index","title":"DiffFusionServer._error_build_object_fail","text":"_error_build_object_fail(alias::AbstractString, e::Exception)\n\nCreate an error response for a failing BUILD operation.\n\nThis error indicates a wrong DiffFuion call.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer._error_bulk_element_list_not_found-Tuple{Any}","page":"Index","title":"DiffFusionServer._error_bulk_element_list_not_found","text":"_error_bulk_element_list_not_found(elem::Any)\n\nCreate an error response for a missing list containing alias and request details for usee in bulk request.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer._error_bulk_list_not_found-Tuple{Any}","page":"Index","title":"DiffFusionServer._error_bulk_list_not_found","text":"_error_bulk_list_not_found(body::Any)\n\nCreate an error response for a missing list for a bulk request.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer._error_create_json_fail-Tuple{AbstractString, Exception}","page":"Index","title":"DiffFusionServer._error_create_json_fail","text":"_error_create_json_fail(alias::AbstractString, e::Exception)\n\nCreate error response for a failing JSON read operation.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer._error_create_json_string_fail-Tuple{AbstractString, Exception}","page":"Index","title":"DiffFusionServer._error_create_json_string_fail","text":"_error_create_json_string_fail(alias::AbstractString, e::Exception)\n\nCreate an error response for a failing JSON write.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer._error_create_ordered_dict_fail-Tuple{AbstractString, Exception}","page":"Index","title":"DiffFusionServer._error_create_ordered_dict_fail","text":"_error_create_ordered_dict_fail(alias::AbstractString, e::Exception)\n\nCreate an error response for a failing dictionary setup.\n\nThis error may occur during COPY operation.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer._error_key_not_found-Tuple{AbstractString}","page":"Index","title":"DiffFusionServer._error_key_not_found","text":"_error_key_not_found(key::AbstractString)\n\nCreate error response for missing http header key.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer._error_object_serialisation_fail-Tuple{AbstractString, Exception}","page":"Index","title":"DiffFusionServer._error_object_serialisation_fail","text":"_error_object_serialisation_fail(alias::AbstractString, e::Exception)\n\nCreate an error response for a failing object serialisation.\n\nThis error indicates an unsupported object beeing applied to DiffFusion's serialisation method.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer._error_operation_not_implemented-Tuple{AbstractString}","page":"Index","title":"DiffFusionServer._error_operation_not_implemented","text":"_error_operation_not_implemented(op::AbstractString)\n\nCreate error response for unknown server operation in http header.\n\nAllowed operations are COPY and BUILD.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer.api_bulk_get-Tuple{HTTP.Messages.Request, AbstractDict}","page":"Index","title":"DiffFusionServer.api_bulk_get","text":"api_bulk_get(req::HTTP.Request, d::AbstractDict)\n\nReturn a list of objects for a list of aliases.\n\nThis operation does not modify the server repository.\n\nRequest header must contain field 'op'. Value of field 'op' is 'COPY' or 'BUILD'.\n\nRequest body must contain a list of 'alias'. The list of 'alias' is iterated. For each 'alias' the corresponding object is retrieved from the server repository.\n\nHandling of each individual object follows method api_get.\n\nThe result is a Vector of objects. This result is written to JSON and returned via the response body.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer.api_bulk_post-Tuple{HTTP.Messages.Request, AbstractDict}","page":"Index","title":"DiffFusionServer.api_bulk_post","text":"api_bulk_post(req::HTTP.Request, d::AbstractDict)\n\nCreate and store a list of objects for a list of aliases.\n\nRequest header must contain field 'op'. Value of field 'op' is 'COPY' or 'BUILD'.\n\nRequest body must be a JSON representation. The JSON object must be of the form\n\n[\n    [alias_1, obj_1],\n    [alias_2, obj_2],\n    ...\n]\n\nThe elements alias_k, represent the object aliases used to store the object in the server repository.\n\nThe elements obj_k are processed according to COPY or BUILD operation and following the methodology in api_post.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer.api_delete-Tuple{HTTP.Messages.Request, AbstractDict}","page":"Index","title":"DiffFusionServer.api_delete","text":"api_delete(req::HTTP.Request, d::AbstractDict)\n\nDelete an object from repository.\n\nRequest header must contain field 'alias'. The value of field 'alias' is the object alias of requested object in the server repository.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer.api_get-Tuple{HTTP.Messages.Request, AbstractDict}","page":"Index","title":"DiffFusionServer.api_get","text":"api_get(req::HTTP.Request, d::AbstractDict)\n\nReturn the object with requested alias header field in body of response.\n\nThis operation does not modify the server repository.\n\nRequest header must contain fields 'alias' and 'op'. The value of field 'alias' is the object alias of requested object in the server repository. Value of field 'op' is 'COPY' or 'BUILD'.\n\nFor COPY operation, the requested data is directly written to JSON format.\n\nFor BUILD operation, the requested data is first serialised using DiffFusion serialise operation. Then the serialised object is written to JSON format.\n\nThe resulting JSON object is returned via the response body.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer.api_get_aliases-Tuple{HTTP.Messages.Request, AbstractDict}","page":"Index","title":"DiffFusionServer.api_get_aliases","text":"api_get_aliases(req::HTTP.Request, d::AbstractDict)\n\nReturn all aliases from the repository in body of response.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer.api_get_info-Tuple{HTTP.Messages.Request}","page":"Index","title":"DiffFusionServer.api_get_info","text":"api_get_info(req::HTTP.Request)\n\nReturn an info string about the API as response.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer.api_post-Tuple{HTTP.Messages.Request, AbstractDict}","page":"Index","title":"DiffFusionServer.api_post","text":"api_post(req::HTTP.Request, d::AbstractDict)\n\nCreate and store an object for a given alias.\n\nRequest header must contain fields 'alias' and 'op'. The value of field 'alias' is the object alias used to store the object in the server repository. Value of field 'op' is 'COPY' or 'BUILD'.\n\nRequest body must be a JSON representation. The data is normalised by first applying a serialise operation.\n\nFor COPY operation, the normalised data is directly stored in the server repository.\n\nFor BUILD operation, the normalised data is deserialised via DiffFusion operations. The result is the stored in the server repository.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer.initial_repository-Tuple{}","page":"Index","title":"DiffFusionServer.initial_repository","text":"initial_repository()\n\nCreate an object repository and initialise with some static objects.\n\n\n\n\n\n","category":"method"},{"location":"function_index/#DiffFusionServer.router","page":"Index","title":"DiffFusionServer.router","text":"router(\n    api_path = _DEFAULT_API_PATH,\n    api_version = _DEFAULT_API_VERSION,\n    )\n\nCreate a handler function router and an initial server repository repository for that router. The function returns the named tuple\n\n(router, repository)\n\nThe router is configured to accept requests for the specified end points. Requests are passed on to the corresponding API functions for processing.\n\nThe router represents a Handler function which is typically used in HTTP.serve(...).\n\nThe repository is a reference to the object repository. The object repository is queried and modified by subsequent requests. The current state of the object repository can be viewed (and modified) by means of the repository object reference.\n\n\n\n\n\n","category":"function"},{"location":"","page":"Home","title":"Home","text":"CurrentModule = DiffFusionServer","category":"page"},{"location":"#DiffFusionServer","page":"Home","title":"DiffFusionServer","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Documentation for DiffFusionServer.","category":"page"},{"location":"#Getting-Started","page":"Home","title":"Getting Started","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The DiffFusionServer package uses HTTP and Sockets packages. These packages need to be added to the current project.","category":"page"},{"location":"","page":"Home","title":"Home","text":"using Pkg\nPkg.add(url=\"https://github.com/frame-consulting/DiffFusionServer.jl\")\nPkg.add(\"HTTP\")\nPkg.add(\"Sockets\")","category":"page"},{"location":"","page":"Home","title":"Home","text":"Start a HTTP server.","category":"page"},{"location":"","page":"Home","title":"Home","text":"using DiffFusionServer\nusing HTTP\nusing Sockets\n\nrouter = DiffFusionServer.router().router\nserver = HTTP.serve!(router, Sockets.localhost, 80)","category":"page"},{"location":"","page":"Home","title":"Home","text":"Now you can visit the end point localhost with your browser. This should display an info text of the API.","category":"page"},{"location":"","page":"Home","title":"Home","text":"Alternatively, you can query the server via HTTP in Julia.","category":"page"},{"location":"","page":"Home","title":"Home","text":"resp = HTTP.get(\"http://localhost/api/v1/info\")\ndisplay(resp)","category":"page"},{"location":"","page":"Home","title":"Home","text":"Finally, you can close the server via","category":"page"},{"location":"","page":"Home","title":"Home","text":"close(server)","category":"page"},{"location":"#API","page":"Home","title":"API","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"This is a summary of the API to serve DiffFusion functionality via HTTP.","category":"page"},{"location":"","page":"Home","title":"Home","text":"The API implements an object repository. Individual objects are accessible via their 'alias' key.","category":"page"},{"location":"","page":"Home","title":"Home","text":"Endpoints:","category":"page"},{"location":"","page":"Home","title":"Home","text":"GET: [api_path]/[version]/info","category":"page"},{"location":"","page":"Home","title":"Home","text":"Return this info message.","category":"page"},{"location":"","page":"Home","title":"Home","text":"GET: [api_path]/[version]/aliases","category":"page"},{"location":"","page":"Home","title":"Home","text":"Return the list of aliases in object repository.","category":"page"},{"location":"","page":"Home","title":"Home","text":"POST: [api_path]/[version]/ops","category":"page"},{"location":"","page":"Home","title":"Home","text":"This method implements the main API logic:\nLoad request body into OrderedDict 'd'.\nRetrieve 'alias' field from  request header.\nRetrieve operation field 'op' from request header.\nProcess OrderedDict 'd' according to operation 'op'.\nStore resulting object in object repository with key 'alias'.\nOperations 'op' are\n'COPY': copy body as OrderedDict to repository,\n'BUILD': de-serialise object and store in repository","category":"page"},{"location":"","page":"Home","title":"Home","text":"POST: [api_path]/[version]/bulk","category":"page"},{"location":"","page":"Home","title":"Home","text":"This method implements the POST method for a list of object.\nRequest body contains a list of two-element lists.\nEach two-element list contains the object 'alias' and the dictionary specifying the object creation.\nObject creation follows the method for single-object POST method.","category":"page"},{"location":"","page":"Home","title":"Home","text":"GET: [api_path]/[version]/ops","category":"page"},{"location":"","page":"Home","title":"Home","text":"Retrieve 'alias' field from  request header, serialise object from repository and return via body.","category":"page"},{"location":"","page":"Home","title":"Home","text":"GET: [api_path]/[version]/bulk","category":"page"},{"location":"","page":"Home","title":"Home","text":"This method implements the GET method for a list of objects.\nRequest body contains a list of 'alias' keys.\nResponse body contains a list of serialised objects.","category":"page"},{"location":"","page":"Home","title":"Home","text":"DELETE: [api_path]/[version]/ops/","category":"page"},{"location":"","page":"Home","title":"Home","text":"Retrieve 'alias' field from  request header and delete the object with given alias.","category":"page"}]
}
